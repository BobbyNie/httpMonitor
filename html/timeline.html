<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="echarts.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1000px;height:800px;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        option = {
    title: {
        text: '监控http请求',
        subtext: '每分钟更新'
    },
    color:['red', 'yellow','blueviolet','green'],
    tooltip: {
        trigger: 'axis',
        axisPointer: {
            type: 'cross',
            label: {
                backgroundColor: '#283b56'
            }
        }
    },
    legend: {
        data:['113.52.112.136','113.112.52.137','202.175.20.121','202.175.20.121','113.52.112.2x']
    },
    toolbox: {
        show: true,
        feature: {
            dataView: {readOnly: false},
            restore: {},
            saveAsImage: {}
        }
    },
    dataZoom: {
        show: true,
        start: 0,
        end: 100
    },
    xAxis: [
        {
            type: 'category',
            boundaryGap: true,
            axisLabel:{
	            formatter:function(val){
	                 return val.split(" ").join("\n");
	            }
        	},
            data: (function (){
                var now = new Date();
                var res = [];
                var len = 10;
                while (len--) {
                    
                    res.unshift(now.toLocaleDateString().replace(/^\D*/,'')+' '+now.toLocaleTimeString().replace(/^\D*/,''));
                   // res.unshift(now.toLocaleDateString().replace(/^\D*/,'')+' '+now.getHours()+':'+now.getMinutes());
                    //res.unshift(now.getFullYear()+'.'+ (now.getMonth() + 1)+'.'+now.getDate()+' '+now.getHours()+':'+now.getMinutes());
                    now = new Date(now - 1*1000);
                }
                return res;
            })()
        }
    ],
    yAxis: [
        {
            type: 'value',
            scale: true,
            name: '请求/分钟',
            max: 1000,
            min: 0,
            boundaryGap: [0.5, 0.5]
         }
       
    ],
    series: [
        
        {
            name:'113.52.112.136',
            type:'line',
            itemStyle: {
                normal: {
                    color: '#6cb041',
                    lineStyle:{
                        width:4//设置线条粗细
                    }
                }
            },
            data:[]
        },
        {
            name:'113.52.112.137',
            type:'line',
            itemStyle: {
                normal: {
                    color: '#ffc000',
                    lineStyle:{
                        width:4//设置线条粗细
                    }
                }
            },
            data:[]
        },
        {
            name:'202.175.20.121',
            type:'line',
            itemStyle: {
                normal: {
                    color: '#5b83cb',
                    lineStyle:{
                        width:4//设置线条粗细
                    }
                }
            },
            data:[]
        },
        {
            name:'202.175.20.122',
            type:'line',
            itemStyle: {
                normal: {
                    color: '#70ad47',
                    lineStyle:{
                        width:4//设置线条粗细
                    }
                }
            },
            data:[]
        },
        {
            name:'202.175.20.2x',
            type:'line',
            itemStyle: {
                normal: {
                    color: '#535353',
                    lineStyle:{
                        width:4//设置线条粗细
                    }
                }
            },
            data:[]
        }
    ]
};


setInterval(function (){
    axisData = (new Date()).toLocaleDateString()+' '+(new Date()).toLocaleTimeString().replace(/^\D*/,'');
    //axisData=(now.getFullYear()+'.'+ (now.getMonth() + 1)+'.'+now.getDate()+' '+now.getHours()+':'+now.getMinutes()).replace(/^\D*/,'');
    //axisData=(now.toLocaleDateString().replace(/^\D*/,'')+' '+now.getHours()+':'+now.getMinutes());
    option.xAxis[0].data.push(axisData);
    if(option.xAxis[0].data.length > 30){
        option.xAxis[0].data.shift();
    }
    
    
    for(var i = 0;i < 5;i++){
        var data0 = option.series[i].data;
        data0.push( ( i*200+Math.random() * 200 + 5).toFixed(1) - 0);
        if(data0.length > 30){
            data0.shift();
        }
    }

    myChart.setOption(option);
}, 1*1000);

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>
</body>
</html>